impl: 'https://github.com/blend-os/tracks/raw/main'

track: 'blendos-base'

packages:
  - 'kitty'
  - 'gparted'
  - 'firefox'
  - 'cosmic-files'
  - 'cosmic-player'
  - 'cosmic-text-editor'
  - 'hyprland'
  - 'pipewire'
  - 'i2c-tools'
  - 'qt6ct'
  - 'wireplumber'
  - 'qt6-multimedia'
  - 'xdg-desktop-portal'
  - 'xdg-desktop-portal-wlr'
  - 'power-profiles-daemon'
  - 'waydroid'
  - 'waydroid-image'

aur-packages: 
  - 'dms-shell-hyprland'
  - 'greetd-dms-greeter-git'

services:
  - 'power-profiles-daemon'
  - 'greetd'

commands:
  - 'id greeter || useradd -r -s /usr/bin/nologin greeter'
  - 'rm -f /usr/share/applications/Waydroid.desktop'    
  - 'mkdir -p /etc/xdg/xdg-desktop-portal'
  - 'mkdir -p /etc/greetd'

  - |
    cat << EOF > /usr/lib/tmpfiles.d/dms-greeter.conf
    d /var/cache/dms-greeter 0755 greeter greeter -
    EOF

  - |
    cat << EOF > /etc/greetd/config.toml
    [terminal]
    vt = 1

    [default_session]
    user = "greeter"
    command = "/usr/bin/dms-greeter --command hyprland"
    EOF
